{"version":3,"sources":["turbopack:///[project]/src/WishActions/data:28503e <text/javascript>","turbopack:///[project]/src/app/wish/page.tsx"],"sourcesContent":["/* __next_internal_action_entry_do_not_use__ [{\"40a54c6fc0460631c70ca009a3a8ed4aa9ce353cbf\":\"default\"},\"src/WishActions/remove.wish.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export default /*#__PURE__*/createServerReference(\"40a54c6fc0460631c70ca009a3a8ed4aa9ce353cbf\",callServer,void 0,findSourceMapURL,\"default\");","\"use client\";\r\n\r\nimport getUserWish from \"@/WishActions/getUserWish.wish\";\r\nimport removeWish from \"@/WishActions/remove.wish\";\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport { WishContext } from \"@/context/WishContext\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function Wish() {\r\n    const [wishlist, setWishlist] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [removingItem, setRemovingItem] = useState<string | null>(null);\r\n    // @ts-ignore\r\n    const { refreshWish } = useContext(WishContext);\r\n\r\n    async function getUserWishData() {\r\n        try {\r\n            setLoading(true);\r\n            const res = await getUserWish();\r\n            console.log(res);\r\n            \r\n            if (res.status === \"success\") {\r\n                setWishlist(res.data);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to load wishlist\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleRemove(productId: string) {\r\n        try {\r\n            setRemovingItem(productId);\r\n            const res = await removeWish(productId);\r\n            if (res.status === \"success\") {\r\n                setWishlist(prev => prev.filter(item => item._id !== productId));\r\n                refreshWish();\r\n                toast.success(\"Removed from wishlist\", { position: \"top-center\", duration: 2000 });\r\n            } else {\r\n                console.error(\"removeWish failed:\", res);\r\n                toast.error(\"Failed to remove item\", { position: \"top-center\", duration: 2000 });\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setRemovingItem(null);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUserWishData();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900\">\r\n                <div className=\"flex flex-col items-center\">\r\n                    <div className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                    <p className=\"mt-4 text-gray-700 dark:text-gray-300 text-lg font-medium\">\r\n                        Loading your wishlist...\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-6\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">My Wishlist ❤️</h1>\r\n\r\n            {wishlist.length === 0 ? (\r\n                <p className=\"text-gray-500\">No items in your wishlist yet.</p>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    {wishlist.map((item) => (\r\n                        <div\r\n                            key={item._id}\r\n                            className=\"p-4 border rounded-lg shadow hover:shadow-lg transition\"\r\n                        >\r\n                            <img\r\n                                src={item.imageCover}\r\n                                alt={item.title}\r\n                                className=\"w-full h-40 object-cover rounded-md mb-3\"\r\n                            />\r\n                            <h2 className=\"font-semibold\">{item.title}</h2>\r\n                            <p className=\"text-gray-500\">{item.price} EGP</p>\r\n                            <button\r\n                                onClick={() => handleRemove(item._id)}\r\n                                disabled={removingItem === item._id}\r\n                                className=\"cursor-pointer mt-2 px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\r\n                            >\r\n                                {removingItem === item._id ? \"Remove\" : \"Remove\"}\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}