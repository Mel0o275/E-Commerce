module.exports=[33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(c,{default:function(){return i},getImageProps:function(){return h}});let d=a.r(33354),e=a.r(94915),f=a.r(67161),g=d._(a.r(2305));function h(a){let{props:b}=(0,e.getImgProps)(a,{defaultLoader:g.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let i=f.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},98472,a=>{"use strict";a.s(["default",()=>n],98472);var b=a.i(87924),c=a.i(72131),d=a.i(3879),e=a.i(5050);let f=(0,e.createServerReference)("409fc0c9355dcff2fa132727164d058fbe05ee43a2",e.callServer,void 0,e.findSourceMapURL,"default");var g=a.i(23292);let h=(0,e.createServerReference)("607aca37f53d2e27c5d338d10bf54654f4186535d4",e.callServer,void 0,e.findSourceMapURL,"default");var i=a.i(3471);async function j(){let a=await (0,i.default)();if(!a)throw Error("User not authenticated");let b=await fetch("https://ecommerce.routemisr.com/api/v1/cart",{method:"DELETE",headers:{token:a}});return await b.json()}var k=a.i(78774),l=a.i(38246),m=a.i(71987);function n(){let[a,e]=(0,c.useState)([]),[i,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),{setcount:u}=(0,c.useContext)(k.CartContext),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("");async function z(){n(!0);let a=await (0,d.default)();console.log(a),y(a.cartId),"success"===a.status&&(e(a.data.products),w(a.data.totalCartPrice)),n(!1)}async function A(a){r(!0),t(!0),p(!0);let b=await f(a);if("success"===b.status){e(b.data.products),g.toast.success("Product removed from cart",{position:"top-center",duration:2e3}),p(!1),r(!1),t(!1),w(b.data.totalCartPrice);let a=0;b.data.products.forEach(b=>{a+=b.count}),u(a)}else g.toast.error("Failed to remove product",{position:"top-right",duration:2e3}),p(!1),r(!1),t(!1)}async function B(a,b,c){r(!0),t(!0),p(!0);let d=await h(a,b);"success"===d.status?(e(d.data.products),g.toast.success("Product updated",{position:"top-center",duration:2e3}),t(!1),p(!1),"+"===c?u(b+1):"-"===c&&u(b-1),w(d.data.totalCartPrice)):(g.toast.error("Failed to update product",{position:"top-center",duration:2e3}),t(!1),p(!1)),r(!1)}async function C(){r(!0),t(!0),p(!0),"success"===(await j()).message?(e([]),g.toast.success("Cart cleared",{position:"top-center",duration:2e3}),p(!1),r(!1),t(!1),u(0)):(g.toast.error("Failed to clear cart",{position:"top-center",duration:2e3}),p(!1),r(!1),t(!1)),t(!1)}return((0,c.useEffect)(()=>{z()},[]),i)?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"mt-4 text-gray-700 dark:text-gray-300 text-lg font-medium",children:"Loading your cart..."})]})}):(0,b.jsxs)("div",{className:"mt-12 max-w-5xl mx-auto animate-fade-in",children:[(0,b.jsxs)("div",{className:"overflow-hidden rounded-2xl shadow-lg bg-white dark:bg-gray-800 mb-5",children:[(0,b.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,b.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4",children:"Product"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center",children:"Qty"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center",children:"Unit Price"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center",children:"Total"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),(0,b.jsx)("tbody",{children:0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"py-10 text-center text-gray-600 dark:text-gray-300",children:"ðŸ›’ Your cart is empty"})}):a.map(a=>(0,b.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:[(0,b.jsxs)("td",{className:"px-6 py-4 flex items-center space-x-4",children:[(0,b.jsx)(m.default,{width:500,height:500,src:a.product.imageCover,className:"w-16 h-16 rounded-lg object-cover border",alt:a.product.title}),(0,b.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:a.product.title})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsx)("button",{onClick:()=>B(a.product.id,String(a.count-1),"-"),disabled:q,className:"cursor-pointer inline-flex items-center justify-center h-6 w-6 p-1    text-sm font-medium text-gray-600 bg-gray-100 border rounded-full    hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600    disabled:opacity-50 disabled:cursor-not-allowed",children:"-"}),(0,b.jsx)("span",{className:"mx-3 text-gray-900 dark:text-white",children:a.count}),(0,b.jsx)("button",{onClick:()=>B(a.product.id,String(a.count+1),"+"),disabled:q,className:"cursor-pointer inline-flex items-center justify-center h-6 w-6 p-1    text-sm font-medium text-gray-600 bg-gray-100 border rounded-full    hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600    disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-center font-semibold text-gray-900 dark:text-white",children:[a.price," EGP"]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-center font-semibold text-green-600 dark:text-green-400",children:[a.count*a.price," EGP"]}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsx)("button",{disabled:o,onClick:()=>A(a.product.id),className:"disabled:cursor-not-allowed cursor-pointer px-3 py-1 text-sm rounded-lg bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-800/50",children:"Remove"})})]},a.product._id))})]}),a.length>0&&(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center p-6 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-b-2xl",children:[(0,b.jsxs)("div",{className:"text-lg font-semibold",children:["Total:",(0,b.jsx)("span",{className:"text-lg font-semibold text-blue-500",children:v})]}),(0,b.jsx)("button",{onClick:C,disabled:s,className:"mt-4 sm:mt-0 cursor-pointer px-5 py-2 rounded-lg bg-red-600 text-white    hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:"Clear Cart"})]})]}),(0,b.jsx)(l.default,{href:`/checkout/${x}`,children:(0,b.jsx)("button",{disabled:o,className:"text-center mt-4 sm:mt-0 cursor-pointer px-5 py-2 rounded-lg bg-blue-600 text-white    hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 my-5",children:"Check out"})})]})}}];

//# sourceMappingURL=_92e629fc._.js.map