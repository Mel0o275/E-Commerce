module.exports=[34689,a=>{"use strict";a.s(["default",()=>n],34689);var b=a.i(87924),c=a.i(56757);let d=c.z.object({email:c.z.email("Email is required").nonempty("Email is required")});var e=a.i(59501),f=a.i(95245),g=a.i(72131),h=a.i(66718),i=a.i(41921);async function j(a){let b=await fetch("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),c=await b.json();return console.log(c),c}var k=a.i(23292);async function l(a){let b=await fetch("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetCode:a})}),c=await b.json();return console.log(c),c}async function m(a,b){let c=await fetch("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,newPassword:b})}),d=await c.json();return console.log(d),d}function n(){let[a,c]=(0,g.useState)(!1),[n,o]=(0,g.useState)(!1),[p,q]=(0,g.useState)(""),[r,s]=(0,g.useState)(""),[t,u]=(0,g.useState)(""),[v,w]=(0,g.useState)(""),[x,y]=(0,g.useState)(!1),z=(0,f.useForm)({defaultValues:{email:""},resolver:(0,e.zodResolver)(d)});async function A(a){y(!0);try{let b=await j(a.email);"success"===b.statusMsg?(k.toast.success("Reset link sent to your email",{position:"top-center",duration:2e3}),u(a.email),c(!0),z.reset()):k.toast.error(b.message||"Error sending reset link",{position:"top-center",duration:2e3})}catch(a){console.log("Error calling forgetPass API:",a)}y(!1)}async function B(){try{let a=await l(p);"Success"===a.status?(k.toast.success("Code verified successfully",{position:"top-center"}),q(""),c(!1),o(!0)):k.toast.error(a.message||"Invalid code",{position:"top-center"})}catch(a){k.toast.error("Error verifying code",{position:"top-center"})}}async function C(){try{let a=await m(t,v);console.log(a),a.token?(k.toast.success("Password reset successfully",{position:"top-center"}),o(!1),w(""),s(""),window.location.href="/login"):(console.log(a),k.toast.error(a.message||"Failed to reset password",{position:"top-center"}))}catch(a){k.toast.error("Error resetting password",{position:"top-center"})}}return(0,b.jsxs)("div",{className:"w-full sm:w-2/3 md:w-1/2 lg:w-1/3 mx-auto mt-12 px-4",children:[(0,b.jsx)(i.Form,{...z,children:(0,b.jsxs)("form",{onSubmit:z.handleSubmit(A),className:"space-y-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-center text-blue-500",children:"Forgot Password"}),(0,b.jsx)(i.FormField,{control:z.control,name:"email",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Email"}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter your email",...a,className:"focus:ring-1 focus:!ring-blue-300",type:"email"})}),(0,b.jsx)(i.FormDescription,{}),(0,b.jsx)(i.FormMessage,{})]})}),(0,b.jsx)("button",{onClick:C,className:"disabled:cursor-not-allowed mt-5 w-full cursor-pointer bg-blue-500 hover:bg-blue-600 duration-100 text-white py-2 rounded",disabled:x,children:"Send Reset Link"})]})}),a&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 shadow-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Enter Reset Code"}),(0,b.jsx)(h.Input,{placeholder:"Enter your reset code",value:p,onChange:a=>q(a.target.value),className:"mb-4"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>{c(!1),q("")},className:"cursor-pointer px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancel"}),(0,b.jsx)("button",{onClick:B,className:"cursor-pointer px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Verify"})]})]})}),n&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 shadow-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Reset Your Password"}),(0,b.jsx)(h.Input,{placeholder:"Enter your email",type:"email",value:t,onChange:a=>u(a.target.value),className:"mb-4"}),(0,b.jsx)(h.Input,{placeholder:"Enter new password",type:"password",value:v,onChange:a=>w(a.target.value),className:"mb-4"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>{o(!1),u(""),w("")},className:"cursor-pointer px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancel"}),(0,b.jsx)("button",{onClick:C,className:"cursor-pointer px-4 py-2 bg-blue-500 text-white rounded hover:bg-green-600",children:"Reset Password"})]})]})})]})}}];

//# sourceMappingURL=src_app_forgotPass_page_tsx_83c29313._.js.map