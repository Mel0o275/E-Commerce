{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Route/Front-end/React/e-commerce-app/e-commerce/src/WishActions/remove.wish.ts"],"sourcesContent":["'use server'\r\nimport getMyToken from \"@/utilities/getMyToken\";\r\n\r\nexport default async function removeWish(id: string) {\r\n    const token = await getMyToken();\r\n    console.log(token);\r\n    \r\n    if(!token) {\r\n        throw new Error(\"User not authenticated\");\r\n    }\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/wishlist/${id}`, {\r\n        method : \"DELETE\",\r\n        headers : {\r\n            token,\r\n            \"Content-Type\" : \"application/json\",\r\n        }\r\n    })\r\n\r\n    const data = await res.json();\r\n    return data;\r\n}"],"names":[],"mappings":";;;;;;;2CAG8B,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///D:/Route/Front-end/React/e-commerce-app/e-commerce/src/app/wish/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport getUserWish from \"@/WishActions/getUserWish.wish\";\r\nimport removeWish from \"@/WishActions/remove.wish\";\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport { WishContext } from \"@/context/WishContext\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function Wish() {\r\n    const [wishlist, setWishlist] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [removingItem, setRemovingItem] = useState<string | null>(null);\r\n    // @ts-ignore\r\n    const { refreshWish } = useContext(WishContext);\r\n\r\n    async function getUserWishData() {\r\n        try {\r\n            setLoading(true);\r\n            const res = await getUserWish();\r\n            console.log(res);\r\n            \r\n            if (res.status === \"success\") {\r\n                setWishlist(res.data);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to load wishlist\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleRemove(productId: string) {\r\n        try {\r\n            setRemovingItem(productId);\r\n            const res = await removeWish(productId);\r\n            if (res.status === \"success\") {\r\n                setWishlist(prev => prev.filter(item => item._id !== productId));\r\n                refreshWish();\r\n                toast.success(\"Removed from wishlist\", { position: \"top-center\", duration: 2000 });\r\n            } else {\r\n                console.error(\"removeWish failed:\", res);\r\n                toast.error(\"Failed to remove item\", { position: \"top-center\", duration: 2000 });\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setRemovingItem(null);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUserWishData();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900\">\r\n                <div className=\"flex flex-col items-center\">\r\n                    <div className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                    <p className=\"mt-4 text-gray-700 dark:text-gray-300 text-lg font-medium\">\r\n                        Loading your wishlist...\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-6\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">My Wishlist ❤️</h1>\r\n\r\n            {wishlist.length === 0 ? (\r\n                <p className=\"text-gray-500\">No items in your wishlist yet.</p>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    {wishlist.map((item) => (\r\n                        <div\r\n                            key={item._id}\r\n                            className=\"p-4 border rounded-lg shadow hover:shadow-lg transition\"\r\n                        >\r\n                            <img\r\n                                src={item.imageCover}\r\n                                alt={item.title}\r\n                                className=\"w-full h-40 object-cover rounded-md mb-3\"\r\n                            />\r\n                            <h2 className=\"font-semibold\">{item.title}</h2>\r\n                            <p className=\"text-gray-500\">{item.price} EGP</p>\r\n                            <button\r\n                                onClick={() => handleRemove(item._id)}\r\n                                disabled={removingItem === item._id}\r\n                                className=\"cursor-pointer mt-2 px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\r\n                            >\r\n                                {removingItem === item._id ? \"Remove\" : \"Remove\"}\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACpB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,aAAa;IACb,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,mNAAU,EAAC,6IAAW;IAE9C,eAAe;QACX,IAAI;YACA,WAAW;YACX,MAAM,MAAM,MAAM,IAAA,oJAAW;YAC7B,QAAQ,GAAG,CAAC;YAEZ,IAAI,IAAI,MAAM,KAAK,WAAW;gBAC1B,YAAY,IAAI,IAAI;YACxB;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC7C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,eAAe,aAAa,SAAiB;QACzC,IAAI;YACA,gBAAgB;YAChB,MAAM,MAAM,MAAM,IAAA,qKAAU,EAAC;YAC7B,IAAI,IAAI,MAAM,KAAK,WAAW;gBAC1B,YAAY,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,GAAG,KAAK;gBACrD;gBACA,iJAAK,CAAC,OAAO,CAAC,yBAAyB;oBAAE,UAAU;oBAAc,UAAU;gBAAK;YACpF,OAAO;gBACH,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,iJAAK,CAAC,KAAK,CAAC,yBAAyB;oBAAE,UAAU;oBAAc,UAAU;gBAAK;YAClF;QACJ,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,IAAI,SAAS;QACT,qBACI,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA4D;;;;;;;;;;;;;;;;;IAMzF;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,SAAS,MAAM,KAAK,kBACjB,8OAAC;gBAAE,WAAU;0BAAgB;;;;;qCAE7B,8OAAC;gBAAI,WAAU;0BACV,SAAS,GAAG,CAAC,CAAC,qBACX,8OAAC;wBAEG,WAAU;;0CAEV,8OAAC;gCACG,KAAK,KAAK,UAAU;gCACpB,KAAK,KAAK,KAAK;gCACf,WAAU;;;;;;0CAEd,8OAAC;gCAAG,WAAU;0CAAiB,KAAK,KAAK;;;;;;0CACzC,8OAAC;gCAAE,WAAU;;oCAAiB,KAAK,KAAK;oCAAC;;;;;;;0CACzC,8OAAC;gCACG,SAAS,IAAM,aAAa,KAAK,GAAG;gCACpC,UAAU,iBAAiB,KAAK,GAAG;gCACnC,WAAU;0CAET,iBAAiB,KAAK,GAAG,GAAG,WAAW;;;;;;;uBAfvC,KAAK,GAAG;;;;;;;;;;;;;;;;AAuBzC","debugId":null}}]
}