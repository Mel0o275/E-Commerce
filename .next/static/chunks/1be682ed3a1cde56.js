(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";e.s(["Button",()=>i],19455);var r=e.i(43476),t=e.i(91918),s=e.i(7670);let n=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,o=s.clsx;var a=e.i(75157);let l=((e,r)=>t=>{var s;if((null==r?void 0:r.variants)==null)return o(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:a,defaultVariants:l}=r,i=Object.keys(a).map(e=>{let r=null==t?void 0:t[e],s=null==l?void 0:l[e];if(null===r)return null;let o=n(r)||n(s);return a[e][o]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,s]=r;return void 0===s||(e[t]=s),e},{});return o(e,i,null==r||null==(s=r.compoundVariants)?void 0:s.reduce((e,r)=>{let{class:t,className:s,...n}=r;return Object.entries(n).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...c}[r]):({...l,...c})[r]===t})?[...e,t,s]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:s,variant:n,size:o,asChild:i=!1,...c}=e,d=i?t.Slot:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,a.cn)(l({variant:n,size:o,className:s})),...c})}},18566,(e,r,t)=>{r.exports=e.r(76562)},91896,e=>{"use strict";e.s(["default",()=>b],91896);var r=e.i(43476),t=e.i(19455),s=e.i(3133),n=e.i(93479),o=e.i(94814),a=e.i(18566),l=e.i(71645),i=e.i(53145),c=e.i(46696),d=e.i(81307);let u=d.z.object({details:d.z.string().nonempty("Name is required").min(2,"Name must be at least 2 characters").max(10,"Name must not exceed 10 characters"),phone:d.z.string().regex(/^(\+201|01|00201)[0-2,5]{1}[0-9]{8}$/,"Phone must be a valid Egyptian number (e.g. 010, 011, 012, 015)"),city:d.z.string().nonempty("Name is required").min(2,"Name must be at least 2 characters").max(10,"Name must not exceed 10 characters")});var m=e.i(95187);let h=(0,m.createServerReference)("708632e2785b8d151576cb1bc8c2394fc38962c84f",m.callServer,void 0,m.findSourceMapURL,"default"),g=(0,m.createServerReference)("60964826cb48749f5513e86f0f7627bde214178030",m.callServer,void 0,m.findSourceMapURL,"default");function b(){let[e,d]=(0,l.useState)(!1),m=(0,a.useRouter)(),{id:b}=(0,a.useParams)();console.log(b);let v=(0,i.useForm)({defaultValues:{details:"",phone:"",city:""},resolver:(0,o.zodResolver)(u)});async function p(e){d(!0);try{let r=await h(b,"http://localhost:3000/",e);console.log(r),"success"===r.status?(c.toast.success("Redirecting to payment...",{position:"top-center",duration:2e3}),window.location.href=r.session.url):c.toast.error(r.message||"Payment failed",{position:"top-center"})}catch(e){console.error(e),c.toast.error("Something went wrong during checkout")}finally{d(!0)}}async function x(e){d(!0);try{let r=await g(b,e);if(console.log(r),"success"===r.status){c.toast.success("Order placed successfully!",{position:"top-center",duration:2e3});let e=r.data.user;console.log(e),m.push("/allorders/".concat(e))}else c.toast.error(r.message||"Something went wrong",{position:"top-center"})}catch(e){console.error(e),c.toast.error("Something went wrong during cash checkout")}finally{d(!0)}}return(0,r.jsx)("div",{className:"w-full sm:w-2/3 md:w-1/2 lg:w-1/3 mx-auto mt-12 px-4",children:(0,r.jsx)(s.Form,{...v,children:(0,r.jsxs)("form",{onSubmit:v.handleSubmit(p),className:"space-y-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center text-blue-500",children:"Checkout"}),(0,r.jsx)(s.FormField,{control:v.control,name:"details",render:e=>{let{field:t}=e;return(0,r.jsxs)(s.FormItem,{children:[(0,r.jsx)(s.FormLabel,{className:"mt-5",children:"Order Details"}),(0,r.jsx)(s.FormControl,{children:(0,r.jsx)(n.Input,{placeholder:"Enter order details",...t,className:"focus:ring-1 focus:!ring-blue-300"})}),(0,r.jsx)(s.FormMessage,{})]})}}),(0,r.jsx)(s.FormField,{control:v.control,name:"phone",render:e=>{let{field:t}=e;return(0,r.jsxs)(s.FormItem,{children:[(0,r.jsx)(s.FormLabel,{className:"mt-5",children:"Phone Number"}),(0,r.jsx)(s.FormControl,{children:(0,r.jsx)(n.Input,{placeholder:"Enter phone number",...t,className:"focus:ring-1 focus:!ring-blue-300"})}),(0,r.jsx)(s.FormMessage,{})]})}}),(0,r.jsx)(s.FormField,{control:v.control,name:"city",render:e=>{let{field:t}=e;return(0,r.jsxs)(s.FormItem,{children:[(0,r.jsx)(s.FormLabel,{className:"mt-5",children:"City"}),(0,r.jsx)(s.FormControl,{children:(0,r.jsx)(n.Input,{placeholder:"Enter your city",...t,className:"focus:ring-1 focus:!ring-blue-300"})}),(0,r.jsx)(s.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-5",children:[(0,r.jsx)(t.Button,{type:"button",onClick:v.handleSubmit(p),disabled:e,className:"cursor-pointer disabled:cursor-not-allowed flex-1 bg-blue-500 hover:bg-blue-600",children:"Pay Online"}),(0,r.jsx)(t.Button,{type:"button",onClick:v.handleSubmit(x),disabled:e,className:"cursor-pointer disabled:cursor-not-allowed flex-1 bg-green-500 hover:bg-green-600",children:"Pay Cash"})]})]})})})}}]);